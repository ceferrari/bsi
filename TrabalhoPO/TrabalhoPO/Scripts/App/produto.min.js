function altera(n,t){var i=parseInt($(n).val().replace(/\./g,""));$(n).val(i+t<0?0:(i+t).toLocaleString())}function insere(n){if(n===0||n===null)altera("#EstoqueAtual",1);else $.post("/Produto/Insere",{id:n}).done(sucesso).fail(erro)}function retira(n){if(n===0||n===null)altera("#EstoqueAtual",-1);else $.post("/Produto/Retira",{id:n}).done(sucesso).fail(erro)}function aumentaMinimo(n){if(n===0||n===null)altera("#EstoqueMinimo",1);else $.post("/Produto/AumentaMinimo",{id:n}).done(sucesso).fail(erro)}function diminuiMinimo(n){if(n===0||n===null)altera("#EstoqueMinimo",-1);else $.post("/Produto/DiminuiMinimo",{id:n}).done(sucesso).fail(erro)}function sucesso(n){$("#EstoqueAtual"+n.Id).html(n.EstoqueAtual.toLocaleString());$("#EstoqueMinimo"+n.Id).html(n.EstoqueMinimo.toLocaleString());$("#PrecisaReposicao"+n.Id).html(n.PrecisaReposicao===!0?"Sim":"N\u00e3o");var t=new Date(parseInt(n.DataAlteracao.substr(6))),i=(t.getDate()<10?"0":"")+t.getDate(),r=(t.getMonth()<9?"0":"")+(t.getMonth()+1),u=(t.getFullYear()<10?"0":"")+t.getFullYear(),f=(t.getHours()<10?"0":"")+t.getHours(),e=(t.getMinutes()<10?"0":"")+t.getMinutes(),o=(t.getSeconds()<10?"0":"")+t.getSeconds();$("#DataAlteracao"+n.Id).html(i+"/"+r+"/"+u+" @ "+f+":"+e+":"+o)}function erro(n){modal(n.statusText,"Erro")}$(document).ready(function(){$("#Preco").on("paste focusout",function(){var n=parseFloat($(this).val().replace(/\./g,"").replace(",",".")).toFixed(2);$(this).val((isNaN(n)||n<0?0:n*1).toLocaleString([],{minimumFractionDigits:2}))});$("#EstoqueAtual, #EstoqueMinimo").on("paste focusout",function(){var n=parseInt($(this).val().replace(/\./g,""));$(this).val(isNaN(n)||n<0?0:(n*1).toLocaleString())})});$("form").submit(function(){return $.ajax({url:this.action,type:this.method,data:$(this).serialize(),success:function(){alert(JSON.stringify($(this)[0]));var n=$(this)[0].url.split("/");modal(n[3]+" editado com sucesso!","Sucesso")},error:function(n){modal(n.statusText,"Erro")}}),!1});